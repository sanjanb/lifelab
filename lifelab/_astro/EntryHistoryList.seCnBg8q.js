import{i as ee}from"./lifecycle.C7LIllQC.js";import{o as te}from"./index-client.CxbhdV-l.js";import{m as H,f as u,t as I,a as m,p as se,b as ae,j as y,g as e,c as r,s as o,r as s,u as c,h as re,e as L}from"./template.BYV1JzE2.js";import{s as p}from"./render.DGpk54Xg.js";import{i as T}from"./if.WMWJDOLq.js";import{e as ie}from"./each.C-V7QYcd.js";import{p as R}from"./props.xJmC_mX4.js";import{g as ne,d as oe}from"./storage.mmsOLJq4.js";import{f as Y}from"./utils.VzlMTaMY.js";import{a as ve}from"./notebookSync.qY34yKPg.js";import{g as le}from"./monthResolution.rEZZeYeX.js";/* empty css                        */import"./config.BPkNxJtt.js";var de=u('<div class="empty-state svelte-1ygj800"><p class="svelte-1ygj800">No entries yet. Log your first entry above!</p></div>'),ce=u('<div class="entry-notes svelte-1ygj800"> </div>'),me=u('<div class="delete-confirm svelte-1ygj800"><p class="svelte-1ygj800">Are you sure you want to delete this entry?</p> <div class="confirm-actions svelte-1ygj800"><button class="btn btn-danger svelte-1ygj800">Yes, Delete</button> <button class="btn btn-secondary svelte-1ygj800">Cancel</button></div></div>'),ue=u('<div class="entry-card svelte-1ygj800"><div class="entry-header svelte-1ygj800"><span class="entry-date svelte-1ygj800"> </span> <div class="entry-actions svelte-1ygj800"><button class="action-btn delete svelte-1ygj800">Delete</button></div></div> <div class="entry-content svelte-1ygj800"><div class="entry-value svelte-1ygj800"> </div> <!></div> <!></div>'),fe=u('<div class="entry-list svelte-1ygj800"></div>'),ge=u('<div class="history-container svelte-1ygj800"><div class="history-header svelte-1ygj800"><h3 class="svelte-1ygj800">Recent Entries</h3> <span class="entry-count svelte-1ygj800"> </span></div> <!></div>');function Le(q,_){ae(_,!1);let f=R(_,"domainId",8),z=R(_,"initialEntries",24,()=>[]),v=H(z()),l=H(null);te(()=>{j();const t=a=>{a.detail.domainId===f()&&j()};return window.addEventListener("entryAdded",t),()=>{window.removeEventListener("entryAdded",t)}});function j(){y(v,ne(f())),e(v).sort((t,a)=>new Date(a.timestamp).getTime()-new Date(t.timestamp).getTime())}function B(t){y(l,t)}function F(){if(e(l)){if(oe(f(),e(l))){const a=le();ve(f(),a.year,a.month),j()}y(l,null)}}function G(){y(l,null)}ee();var b=ge(),h=r(b),C=o(r(h),2),J=r(C);s(C),s(h);var K=o(h,2);{var O=t=>{var a=de();m(t,a)},P=t=>{var a=fe();ie(a,5,()=>e(v),E=>E.id,(E,i)=>{var D=ue(),w=r(D),k=r(w),Q=r(k,!0);s(k);var M=o(k,2),S=r(M);s(M),s(w);var x=o(w,2),A=r(x),U=r(A,!0);s(A);var V=o(A,2);{var W=n=>{var d=ce(),g=r(d,!0);s(d),I(()=>p(g,(e(i),c(()=>e(i).notes)))),m(n,d)};T(V,n=>{e(i),c(()=>e(i).notes)&&n(W)})}s(x);var X=o(x,2);{var Z=n=>{var d=me(),g=o(r(d),2),N=r(g),$=o(N,2);s(g),s(d),L("click",N,F),L("click",$,G),m(n,d)};T(X,n=>{e(l),e(i),c(()=>e(l)===e(i).id)&&n(Z)})}s(D),I(n=>{p(Q,n),p(U,(e(i),c(()=>e(i).value)))},[()=>(re(Y),e(i),c(()=>Y(e(i).timestamp)))]),L("click",S,()=>B(e(i).id)),m(E,D)}),s(a),m(t,a)};T(K,t=>{e(v),c(()=>e(v).length===0)?t(O):t(P,!1)})}s(b),I(()=>p(J,`${e(v),c(()=>e(v).length)??""} total`)),m(q,b),se()}export{Le as default};
