import{l as n,d as t,s as e}from"./storage-BXgAf6ik.js";import{D as o,c as r}from"./schema-Cp9kWJcO.js";import{e as a,a as s}from"./export-JXG8QGfe.js";function i(n,t,e=null,a=null){const s=e||r(t,{...o});var i;n.innerHTML=`\n    <div class="data-entry-form">\n      <h3>Entry for ${d(t)}</h3>\n      \n      <div class="form-group">\n        <label>Date</label>\n        <input type="date" id="entry-date" value="${t}" />\n      </div>\n      \n      <div class="domains-section">\n        <h4>Domain Scores (0.0 - 1.0)</h4>\n        ${i=s.domains,Object.entries(i||o).map(([n,t])=>`\n      <div class="domain-input">\n        <label for="domain-${n}">${l(n)}</label>\n        <input \n          type="number" \n          id="domain-${n}" \n          name="${n}"\n          min="0" \n          max="1" \n          step="0.1" \n          value="${t}"\n        />\n      </div>\n    `).join("")}\n      </div>\n      \n      <div class="form-group">\n        <label for="entry-notes">Notes</label>\n        <textarea id="entry-notes" rows="4" placeholder="Optional reflection...">${s.notes||""}</textarea>\n      </div>\n      \n      <div class="form-actions">\n        <button class="btn-primary" id="save-entry">Save Entry</button>\n        <button class="btn-secondary" id="cancel-entry">Cancel</button>\n      </div>\n    </div>\n  `;const c=n.querySelector("#save-entry"),u=n.querySelector("#cancel-entry");c.addEventListener("click",()=>{const n=function(){const n=document.getElementById("entry-date").value,t=document.getElementById("entry-notes").value,e={};return document.querySelectorAll(".domain-input input").forEach(n=>{e[n.name]=parseFloat(n.value)||0}),r(n,e,t)}();a&&a(n)}),u.addEventListener("click",()=>{n.innerHTML=""})}function d(n){return new Date(n+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function l(n){return n.charAt(0).toUpperCase()+n.slice(1)}let c=(new Date).getFullYear(),u=(new Date).getMonth()+1,p=[];function m(){p=n(c,u),function(){const n=document.getElementById("notebook-table-container");if(0===p.length)return void(n.innerHTML='\n      <div class="empty-state">\n        <p>No entries for this month yet.</p>\n        <p>Use the Quick Entry above to get started!</p>\n      </div>\n    ');const o=new Set;p.forEach(n=>{n.domains&&Object.keys(n.domains).forEach(n=>o.add(n))});const r=Array.from(o).sort(),a=`\n    <table class="data-table">\n      <thead>\n        <tr>\n          <th>Date</th>\n          ${r.map(n=>{return`<th>${t=n,t.charAt(0).toUpperCase()+t.slice(1)}</th>`;var t}).join("")}\n          <th>Avg</th>\n          <th>Notes</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${p.map(n=>function(n,t){const e=t.map(t=>n.domains[t]||"—"),o=function(n){if(!n.domains)return null;const t=Object.values(n.domains).filter(n=>"number"==typeof n);return 0===t.length?null:t.reduce((n,t)=>n+t,0)/t.length}(n),r=new Date(n.date+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return`\n    <tr>\n      <td><strong>${r}</strong></td>\n      ${e.map(n=>`<td class="score-cell">${"number"==typeof n?n.toFixed(2):n}</td>`).join("")}\n      <td class="avg-cell"><strong>${null!==o?o.toFixed(2):"—"}</strong></td>\n      <td class="notes-cell">${function(n,t=50){return n?n.length<=t?n:n.substring(0,t)+"...":"—"}(n.notes||"")}</td>\n      <td class="actions-cell">\n        <button class="btn-icon btn-edit" data-date="${n.date}" title="Edit">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n            <path d="M11.3333 2.00004C11.5084 1.82494 11.7163 1.68605 11.9451 1.59129C12.1739 1.49653 12.4191 1.44775 12.6666 1.44775C12.9142 1.44775 13.1594 1.49653 13.3882 1.59129C13.617 1.68605 13.8249 1.82494 14 2.00004C14.1751 2.17513 14.314 2.383 14.4087 2.61178C14.5035 2.84055 14.5523 3.08575 14.5523 3.33337C14.5523 3.58099 14.5035 3.82619 14.4087 4.05497C14.314 4.28374 14.1751 4.49161 14 4.66671L5.00001 13.6667L1.33334 14.6667L2.33334 11L11.3333 2.00004Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        </button>\n        <button class="btn-icon btn-delete" data-date="${n.date}" title="Delete">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n            <path d="M2 4H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M12.6667 4V13.3333C12.6667 14 12 14.6667 11.3333 14.6667H4.66667C4 14.6667 3.33333 14 3.33333 13.3333V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M5.33333 4V2.66667C5.33333 2 6 1.33333 6.66667 1.33333H9.33333C10 1.33333 10.6667 2 10.6667 2.66667V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n        </button>\n      </td>\n    </tr>\n  `}(n,r)).join("")}\n      </tbody>\n    </table>\n  `;n.innerHTML=a,n.querySelectorAll(".btn-edit").forEach(n=>{n.addEventListener("click",n=>{const t=n.target.dataset.date,o=p.find(n=>n.date===t);!function(n,t){const o=document.createElement("div");o.className="modal-overlay",o.innerHTML='\n    <div class="modal-content">\n      <div id="edit-form"></div>\n    </div>\n  ',document.body.appendChild(o),i(o.querySelector("#edit-form"),n,t,n=>{e(n),m(),o.remove()}),o.addEventListener("click",n=>{n.target===o&&o.remove()})}(t,o)})}),n.querySelectorAll(".btn-delete").forEach(n=>{n.addEventListener("click",n=>{const e=n.target.dataset.date;confirm(`Delete entry for ${e}?`)&&(t(e),m())})})}()}function v(){const n=document.getElementById("current-month-display"),t=new Date(c,u-1);n.textContent=t.toLocaleDateString("en-US",{month:"long",year:"numeric"})}!async function(){v(),m(),document.getElementById("prev-month").addEventListener("click",()=>{u--,u<1&&(u=12,c--),v(),m()}),document.getElementById("next-month").addEventListener("click",()=>{u++,u>12&&(u=1,c++),v(),m()}),function(n,t){const e=(new Date).toISOString().split("T")[0];n.innerHTML=`\n    <div class="quick-entry">\n      <div class="quick-entry-header">\n        <h3>Quick Entry</h3>\n        <span class="quick-entry-date">${d(e)}</span>\n      </div>\n      <div class="quick-domains">\n        ${Object.keys(o).map(n=>`\n          <div class="quick-domain-slider">\n            <div class="slider-label">\n              <label>${l(n)}</label>\n              <span class="slider-value" id="value-${n}">50%</span>\n            </div>\n            <div class="slider-track-wrapper">\n              <div class="slider-markers">\n                <span>0</span>\n                <span>25</span>\n                <span>50</span>\n                <span>75</span>\n                <span>100</span>\n              </div>\n              <input type="range" id="quick-${n}" min="0" max="100" step="5" value="50" list="markers" />\n            </div>\n          </div>\n        `).join("")}\n      </div>\n      <button class="btn-primary" id="quick-save">\n        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-right: 8px;">\n          <path d="M13 2H3C2.44772 2 2 2.44772 2 3V13C2 13.5523 2.44772 14 3 14H13C13.5523 14 14 13.5523 14 13V3C14 2.44772 13.5523 2 13 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path d="M11 2V6H5V2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path d="M5 10H11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n        </svg>\n        Save Entry\n      </button>\n    </div>\n  `,n.querySelectorAll('input[type="range"]').forEach(n=>{const t=t=>{const e=n.id.replace("quick-","");document.getElementById(`value-${e}`).textContent=`${t}%`,n.style.setProperty("--slider-value",t)};n.addEventListener("input",n=>{t(n.target.value)}),n.addEventListener("change",n=>{const e=5*Math.round(n.target.value/5);n.target.value=e,t(e)}),t(n.value)}),n.querySelector("#quick-save").addEventListener("click",()=>{const o={};n.querySelectorAll('input[type="range"]').forEach(n=>{const t=n.id.replace("quick-","");o[t]=parseFloat(n.value)/100});const a=r(e,o,"");t&&t(a)})}(document.getElementById("quick-entry-container"),n=>{e(n),m(),alert("Entry saved!")}),function(){const n=document.getElementById("export-container");n.innerHTML='\n    <div class="export-buttons">\n      <button class="btn-secondary" id="export-month-json">Export Month (JSON)</button>\n      <button class="btn-secondary" id="export-month-csv">Export Month (CSV)</button>\n    </div>\n  ',n.querySelector("#export-month-json").addEventListener("click",()=>{a(p,c,u)}),n.querySelector("#export-month-csv").addEventListener("click",()=>{const n=`lifelab-${c}-${String(u).padStart(2,"0")}.csv`;s(p,n)})}()}();
//# sourceMappingURL=notebook-DKg3wJp8.js.map
