{"version":3,"file":"index-R_8Edtov.js","sources":["../../src/data/storage.js","../../src/graphs/lineGraph.js","../../src/graphs/heatmap.js","../../src/insights/analytics.js","../../src/data/migrate.js","../../src/main.js"],"sourcesContent":["/**\r\n * LocalStorage Data Persistence\r\n * Simple local storage for data that persists across sessions\r\n */\r\n\r\nconst STORAGE_KEY = \"lifelab_data\";\r\nconst SETTINGS_KEY = \"lifelab_settings\";\r\n\r\n/**\r\n * Saves data to localStorage\r\n * @param {Object} data - Data object mapping months to day arrays\r\n */\r\nexport function saveToLocalStorage(data) {\r\n  try {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Failed to save to localStorage:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Loads all data from localStorage\r\n * @returns {Object} Data object or empty object\r\n */\r\nexport function loadFromLocalStorage() {\r\n  try {\r\n    const data = localStorage.getItem(STORAGE_KEY);\r\n    return data ? JSON.parse(data) : {};\r\n  } catch (error) {\r\n    console.error(\"Failed to load from localStorage:\", error);\r\n    return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Saves data for a specific month\r\n * @param {number} year - Year\r\n * @param {number} month - Month (1-12)\r\n * @param {Array} monthData - Array of day records\r\n */\r\nexport function saveMonth(year, month, monthData) {\r\n  const allData = loadFromLocalStorage();\r\n  const key = `${year}-${String(month).padStart(2, \"0\")}`;\r\n  allData[key] = monthData;\r\n  return saveToLocalStorage(allData);\r\n}\r\n\r\n/**\r\n * Loads data for a specific month\r\n * @param {number} year - Year\r\n * @param {number} month - Month (1-12)\r\n * @returns {Array} Array of day records\r\n */\r\nexport function loadMonth(year, month) {\r\n  const allData = loadFromLocalStorage();\r\n  const key = `${year}-${String(month).padStart(2, \"0\")}`;\r\n  return allData[key] || [];\r\n}\r\n\r\n/**\r\n * Adds or updates a single day entry\r\n * @param {Object} dayData - Day record\r\n * @returns {boolean} Success status\r\n */\r\nexport function saveDayEntry(dayData) {\r\n  const date = new Date(dayData.date);\r\n  const year = date.getFullYear();\r\n  const month = date.getMonth() + 1;\r\n\r\n  let monthData = loadMonth(year, month);\r\n\r\n  // Remove existing entry for this date\r\n  monthData = monthData.filter((d) => d.date !== dayData.date);\r\n\r\n  // Add new entry\r\n  monthData.push(dayData);\r\n\r\n  // Sort by date\r\n  monthData.sort((a, b) => a.date.localeCompare(b.date));\r\n\r\n  return saveMonth(year, month, monthData);\r\n}\r\n\r\n/**\r\n * Deletes a day entry\r\n * @param {string} date - ISO date string\r\n * @returns {boolean} Success status\r\n */\r\nexport function deleteDayEntry(date) {\r\n  const dateObj = new Date(date);\r\n  const year = dateObj.getFullYear();\r\n  const month = dateObj.getMonth() + 1;\r\n\r\n  let monthData = loadMonth(year, month);\r\n  monthData = monthData.filter((d) => d.date !== date);\r\n\r\n  return saveMonth(year, month, monthData);\r\n}\r\n\r\n/**\r\n * Gets all months that have data\r\n * @returns {Array} Array of {year, month} objects\r\n */\r\nexport function getAvailableMonths() {\r\n  const allData = loadFromLocalStorage();\r\n  return Object.keys(allData)\r\n    .map((key) => {\r\n      const [year, month] = key.split(\"-\");\r\n      return {\r\n        year: parseInt(year),\r\n        month: parseInt(month),\r\n        key,\r\n      };\r\n    })\r\n    .sort((a, b) => a.key.localeCompare(b.key));\r\n}\r\n\r\n/**\r\n * Saves settings\r\n * @param {Object} settings - Settings object\r\n */\r\nexport function saveSettings(settings) {\r\n  try {\r\n    localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Failed to save settings:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Loads settings\r\n * @returns {Object} Settings object\r\n */\r\nexport function loadSettings() {\r\n  try {\r\n    const settings = localStorage.getItem(SETTINGS_KEY);\r\n    return settings ? JSON.parse(settings) : getDefaultSettings();\r\n  } catch (error) {\r\n    console.error(\"Failed to load settings:\", error);\r\n    return getDefaultSettings();\r\n  }\r\n}\r\n\r\n/**\r\n * Gets default settings\r\n */\r\nfunction getDefaultSettings() {\r\n  return {\r\n    domains: {\r\n      health: true,\r\n      skills: true,\r\n      finance: true,\r\n      academics: true,\r\n    },\r\n    theme: \"light\",\r\n    firstDayOfWeek: 1, // Monday\r\n  };\r\n}\r\n\r\n/**\r\n * Clears all data (with confirmation)\r\n * @returns {boolean} Success status\r\n */\r\nexport function clearAllData() {\r\n  try {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"Failed to clear data:\", error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Merges imported data with existing data\r\n * @param {Array} importedData - Array of day records to merge\r\n */\r\nexport function mergeImportedData(importedData) {\r\n  const grouped = {};\r\n\r\n  // Group imported data by month\r\n  importedData.forEach((day) => {\r\n    const date = new Date(day.date);\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1;\r\n    const key = `${year}-${String(month).padStart(2, \"0\")}`;\r\n\r\n    if (!grouped[key]) {\r\n      grouped[key] = [];\r\n    }\r\n    grouped[key].push(day);\r\n  });\r\n\r\n  // Merge with existing data\r\n  Object.entries(grouped).forEach(([key, days]) => {\r\n    const [year, month] = key.split(\"-\");\r\n    const existingData = loadMonth(parseInt(year), parseInt(month));\r\n\r\n    // Create a map of existing dates\r\n    const dateMap = new Map(existingData.map((d) => [d.date, d]));\r\n\r\n    // Add/update with imported data\r\n    days.forEach((day) => {\r\n      dateMap.set(day.date, day);\r\n    });\r\n\r\n    // Convert back to array and sort\r\n    const mergedData = Array.from(dateMap.values()).sort((a, b) =>\r\n      a.date.localeCompare(b.date)\r\n    );\r\n\r\n    saveMonth(parseInt(year), parseInt(month), mergedData);\r\n  });\r\n}\r\n","/**\r\n * Line Graph Renderer - Pure SVG, no libraries\r\n * Shows monthly trends with clean, readable output\r\n */\r\n\r\n/**\r\n * Creates an SVG line graph from daily data\r\n * @param {Array} data - Array of day records with scores\r\n * @param {HTMLElement} container - DOM element to render into\r\n * @param {Object} options - Configuration options\r\n */\r\nexport function renderLineGraph(data, container, options = {}) {\r\n  const {\r\n    width = 800,\r\n    height = 300,\r\n    marginTop = 20,\r\n    marginRight = 20,\r\n    marginBottom = 40,\r\n    marginLeft = 50,\r\n  } = options;\r\n\r\n  // Clear container\r\n  container.innerHTML = \"\";\r\n\r\n  // Calculate dimensions\r\n  const chartWidth = width - marginLeft - marginRight;\r\n  const chartHeight = height - marginTop - marginBottom;\r\n\r\n  // Create SVG\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\r\n  svg.classList.add(\"svg-graph\");\r\n\r\n  // Create chart group\r\n  const chartGroup = document.createElementNS(\r\n    \"http://www.w3.org/2000/svg\",\r\n    \"g\"\r\n  );\r\n  chartGroup.setAttribute(\r\n    \"transform\",\r\n    `translate(${marginLeft}, ${marginTop})`\r\n  );\r\n\r\n  // Get max day number for X axis\r\n  const maxDay = Math.max(...data.map((d) => new Date(d.date).getDate()));\r\n\r\n  // Draw X axis\r\n  const xAxis = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n  xAxis.setAttribute(\"x1\", 0);\r\n  xAxis.setAttribute(\"y1\", chartHeight);\r\n  xAxis.setAttribute(\"x2\", chartWidth);\r\n  xAxis.setAttribute(\"y2\", chartHeight);\r\n  xAxis.classList.add(\"axis-line\");\r\n  chartGroup.appendChild(xAxis);\r\n\r\n  // Draw Y axis\r\n  const yAxis = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\r\n  yAxis.setAttribute(\"x1\", 0);\r\n  yAxis.setAttribute(\"y1\", 0);\r\n  yAxis.setAttribute(\"x2\", 0);\r\n  yAxis.setAttribute(\"y2\", chartHeight);\r\n  yAxis.classList.add(\"axis-line\");\r\n  chartGroup.appendChild(yAxis);\r\n\r\n  // Add Y axis labels (0 to 1.0)\r\n  for (let i = 0; i <= 4; i++) {\r\n    const value = i * 0.25;\r\n    const y = chartHeight - value * chartHeight;\r\n\r\n    const label = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"text\"\r\n    );\r\n    label.setAttribute(\"x\", -10);\r\n    label.setAttribute(\"y\", y + 4);\r\n    label.setAttribute(\"text-anchor\", \"end\");\r\n    label.textContent = value.toFixed(2);\r\n    chartGroup.appendChild(label);\r\n\r\n    // Grid line\r\n    const gridLine = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"line\"\r\n    );\r\n    gridLine.setAttribute(\"x1\", 0);\r\n    gridLine.setAttribute(\"y1\", y);\r\n    gridLine.setAttribute(\"x2\", chartWidth);\r\n    gridLine.setAttribute(\"y2\", y);\r\n    gridLine.setAttribute(\"stroke\", \"#e0e0e0\");\r\n    gridLine.setAttribute(\"stroke-dasharray\", \"2,2\");\r\n    chartGroup.appendChild(gridLine);\r\n  }\r\n\r\n  // Calculate points for line\r\n  const points = data.map((d) => {\r\n    const day = new Date(d.date).getDate();\r\n    const score = calculateScore(d);\r\n\r\n    const x = (day / maxDay) * chartWidth;\r\n    const y = chartHeight - score * chartHeight;\r\n\r\n    return { x, y, day, score };\r\n  });\r\n\r\n  // Sort by day\r\n  points.sort((a, b) => a.day - b.day);\r\n\r\n  // Create line path\r\n  if (points.length > 0) {\r\n    const pathData = points\r\n      .map((p, i) => {\r\n        return `${i === 0 ? \"M\" : \"L\"} ${p.x} ${p.y}`;\r\n      })\r\n      .join(\" \");\r\n\r\n    const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\r\n    path.setAttribute(\"d\", pathData);\r\n    path.classList.add(\"data-line\");\r\n    chartGroup.appendChild(path);\r\n\r\n    // Add data points\r\n    points.forEach((p) => {\r\n      const circle = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"circle\"\r\n      );\r\n      circle.setAttribute(\"cx\", p.x);\r\n      circle.setAttribute(\"cy\", p.y);\r\n      circle.setAttribute(\"r\", 3);\r\n      circle.classList.add(\"data-point\");\r\n\r\n      // Tooltip\r\n      const title = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"title\"\r\n      );\r\n      title.textContent = `Day ${p.day}: ${p.score.toFixed(2)}`;\r\n      circle.appendChild(title);\r\n\r\n      chartGroup.appendChild(circle);\r\n    });\r\n  }\r\n\r\n  // Add X axis label\r\n  const xLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\r\n  xLabel.setAttribute(\"x\", chartWidth / 2);\r\n  xLabel.setAttribute(\"y\", chartHeight + 30);\r\n  xLabel.setAttribute(\"text-anchor\", \"middle\");\r\n  xLabel.textContent = \"Day of Month\";\r\n  chartGroup.appendChild(xLabel);\r\n\r\n  // Add Y axis label\r\n  const yLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\r\n  yLabel.setAttribute(\"x\", -chartHeight / 2);\r\n  yLabel.setAttribute(\"y\", -35);\r\n  yLabel.setAttribute(\"text-anchor\", \"middle\");\r\n  yLabel.setAttribute(\"transform\", `rotate(-90, -${chartHeight / 2}, -35)`);\r\n  yLabel.textContent = \"Daily Score\";\r\n  chartGroup.appendChild(yLabel);\r\n\r\n  svg.appendChild(chartGroup);\r\n  container.appendChild(svg);\r\n}\r\n\r\n/**\r\n * Calculate average score for a day\r\n * @param {Object} day - Day record\r\n * @returns {number} Average score (0-1)\r\n */\r\nfunction calculateScore(day) {\r\n  if (!day.domains) return 0;\r\n  const scores = Object.values(day.domains);\r\n  if (scores.length === 0) return 0;\r\n  return scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n}\r\n","/**\r\n * Heatmap Visualization - Yearly overview with neutral colors\r\n * Emphasizes consistency over perfection\r\n */\r\n\r\n/**\r\n * Renders a yearly heatmap visualization\r\n * @param {Array} data - Array of all day records for the year\r\n * @param {HTMLElement} container - DOM element to render into\r\n * @param {Object} options - Configuration options\r\n */\r\nexport function renderHeatmap(data, container, options = {}) {\r\n  const {\r\n    cellSize = 12,\r\n    cellGap = 2,\r\n    year = new Date().getFullYear(),\r\n  } = options;\r\n\r\n  // Clear container\r\n  container.innerHTML = \"\";\r\n\r\n  // Group data by week\r\n  const weeks = groupByWeek(data, year);\r\n\r\n  const width = (cellSize + cellGap) * 53; // ~52 weeks\r\n  const height = (cellSize + cellGap) * 7 + 40; // 7 days + labels\r\n\r\n  // Create SVG\r\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\n  svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\r\n  svg.style.width = \"100%\";\r\n  svg.style.height = \"auto\";\r\n\r\n  // Add day labels (Mon, Wed, Fri)\r\n  const dayLabels = [\"Mon\", \"Wed\", \"Fri\"];\r\n  const dayIndices = [0, 2, 4];\r\n\r\n  dayIndices.forEach((dayIdx, i) => {\r\n    const label = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"text\"\r\n    );\r\n    label.setAttribute(\"x\", 0);\r\n    label.setAttribute(\r\n      \"y\",\r\n      20 + dayIdx * (cellSize + cellGap) + cellSize / 2 + 4\r\n    );\r\n    label.setAttribute(\"text-anchor\", \"start\");\r\n    label.setAttribute(\"font-size\", \"10px\");\r\n    label.setAttribute(\"fill\", \"#666\");\r\n    label.textContent = dayLabels[i];\r\n    svg.appendChild(label);\r\n  });\r\n\r\n  // Render weeks\r\n  weeks.forEach((week, weekIdx) => {\r\n    week.forEach((day, dayIdx) => {\r\n      if (!day) return;\r\n\r\n      const x = 40 + weekIdx * (cellSize + cellGap);\r\n      const y = 20 + dayIdx * (cellSize + cellGap);\r\n\r\n      const rect = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"rect\"\r\n      );\r\n      rect.setAttribute(\"x\", x);\r\n      rect.setAttribute(\"y\", y);\r\n      rect.setAttribute(\"width\", cellSize);\r\n      rect.setAttribute(\"height\", cellSize);\r\n      rect.setAttribute(\"rx\", 2);\r\n      rect.classList.add(\"heatmap-cell\");\r\n\r\n      // Calculate color based on score\r\n      const score = calculateScore(day);\r\n      const color = getHeatmapColor(score);\r\n      rect.setAttribute(\"fill\", color);\r\n\r\n      // Tooltip\r\n      const title = document.createElementNS(\r\n        \"http://www.w3.org/2000/svg\",\r\n        \"title\"\r\n      );\r\n      title.textContent = `${day.date}: ${score.toFixed(2)}`;\r\n      rect.appendChild(title);\r\n\r\n      svg.appendChild(rect);\r\n    });\r\n  });\r\n\r\n  container.appendChild(svg);\r\n}\r\n\r\n/**\r\n * Groups day records by week\r\n * @param {Array} data - Array of day records\r\n * @param {number} year - Year to organize\r\n * @returns {Array} Array of weeks, each week is array of 7 days\r\n */\r\nfunction groupByWeek(data, year) {\r\n  const weeks = [];\r\n  const dataMap = new Map(data.map((d) => [d.date, d]));\r\n\r\n  // Start from first day of year\r\n  const firstDay = new Date(year, 0, 1);\r\n  const lastDay = new Date(year, 11, 31);\r\n\r\n  let currentWeek = [];\r\n  let currentDate = new Date(firstDay);\r\n\r\n  // Adjust to start on Monday\r\n  const dayOfWeek = currentDate.getDay();\r\n  const daysToMonday = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;\r\n  currentDate.setDate(currentDate.getDate() + daysToMonday);\r\n\r\n  while (currentDate <= lastDay) {\r\n    const dateStr = currentDate.toISOString().split(\"T\")[0];\r\n    const dayData = dataMap.get(dateStr);\r\n\r\n    currentWeek.push(dayData || null);\r\n\r\n    if (currentWeek.length === 7) {\r\n      weeks.push(currentWeek);\r\n      currentWeek = [];\r\n    }\r\n\r\n    currentDate.setDate(currentDate.getDate() + 1);\r\n  }\r\n\r\n  if (currentWeek.length > 0) {\r\n    weeks.push(currentWeek);\r\n  }\r\n\r\n  return weeks;\r\n}\r\n\r\n/**\r\n * Calculate average score for a day\r\n * @param {Object} day - Day record\r\n * @returns {number} Average score (0-1)\r\n */\r\nfunction calculateScore(day) {\r\n  if (!day || !day.domains) return 0;\r\n  const scores = Object.values(day.domains);\r\n  if (scores.length === 0) return 0;\r\n  return scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n}\r\n\r\n/**\r\n * Gets neutral heatmap color based on score\r\n * @param {number} score - Score value (0-1)\r\n * @returns {string} Hex color\r\n */\r\nfunction getHeatmapColor(score) {\r\n  if (score === 0) return \"#f0f0f0\";\r\n\r\n  // Neutral gray scale - no guilt, no judgment\r\n  const intensity = Math.floor(score * 4);\r\n\r\n  const colors = [\r\n    \"#f0f0f0\", // 0-0.25\r\n    \"#d0d0d0\", // 0.25-0.5\r\n    \"#a0a0a0\", // 0.5-0.75\r\n    \"#707070\", // 0.75-1.0\r\n    \"#4a5568\", // 1.0\r\n  ];\r\n\r\n  return colors[Math.min(intensity, 4)];\r\n}\r\n","/**\r\n * Analytics - Turn data into reflection\r\n * Focus on patterns, not scores\r\n */\r\n\r\n/**\r\n * Analyzes monthly data and generates insights\r\n * @param {Array} data - Array of day records\r\n * @returns {Array} Array of insight strings\r\n */\r\nexport function generateInsights(data) {\r\n  if (!data || data.length === 0) {\r\n    return [\"No data available for analysis\"];\r\n  }\r\n\r\n  const insights = [];\r\n\r\n  // Calculate overall trend\r\n  const trend = analyzeTrend(data);\r\n  if (trend) insights.push(trend);\r\n\r\n  // Find energy patterns\r\n  const energyPattern = analyzeEnergyPattern(data);\r\n  if (energyPattern) insights.push(energyPattern);\r\n\r\n  // Domain correlation\r\n  const correlation = analyzeDomainCorrelation(data);\r\n  if (correlation) insights.push(correlation);\r\n\r\n  // Consistency check\r\n  const consistency = analyzeConsistency(data);\r\n  if (consistency) insights.push(consistency);\r\n\r\n  // Weekend vs weekday\r\n  const weekendPattern = analyzeWeekendPattern(data);\r\n  if (weekendPattern) insights.push(weekendPattern);\r\n\r\n  return insights.length > 0 ? insights : [\"Gathering patterns...\"];\r\n}\r\n\r\n/**\r\n * Analyzes overall trend direction\r\n */\r\nfunction analyzeTrend(data) {\r\n  const scores = data\r\n    .map((d) => calculateDailyScore(d))\r\n    .filter((s) => s !== null);\r\n  if (scores.length < 5) return null;\r\n\r\n  const firstHalf = scores.slice(0, Math.floor(scores.length / 2));\r\n  const secondHalf = scores.slice(Math.floor(scores.length / 2));\r\n\r\n  const firstAvg = average(firstHalf);\r\n  const secondAvg = average(secondHalf);\r\n\r\n  const diff = secondAvg - firstAvg;\r\n\r\n  if (Math.abs(diff) < 0.05) {\r\n    return \"Scores remained stable throughout the month\";\r\n  } else if (diff > 0) {\r\n    return `Upward trend detected: ${(diff * 100).toFixed(1)}% improvement`;\r\n  } else {\r\n    return `Scores dipped in second half by ${Math.abs(diff * 100).toFixed(\r\n      1\r\n    )}%`;\r\n  }\r\n}\r\n\r\n/**\r\n * Analyzes energy patterns across the month\r\n */\r\nfunction analyzeEnergyPattern(data) {\r\n  const scores = data\r\n    .map((d, i) => ({\r\n      day: i + 1,\r\n      score: calculateDailyScore(d),\r\n    }))\r\n    .filter((s) => s.score !== null);\r\n\r\n  if (scores.length < 10) return null;\r\n\r\n  // Find the weakest period\r\n  const windowSize = 5;\r\n  let minAvg = 1;\r\n  let minDay = 0;\r\n\r\n  for (let i = 0; i <= scores.length - windowSize; i++) {\r\n    const window = scores.slice(i, i + windowSize);\r\n    const avg = average(window.map((s) => s.score));\r\n    if (avg < minAvg) {\r\n      minAvg = avg;\r\n      minDay = window[Math.floor(windowSize / 2)].day;\r\n    }\r\n  }\r\n\r\n  if (minAvg < 0.5) {\r\n    return `Energy dips around day ${minDay}`;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Analyzes correlation between domains\r\n */\r\nfunction analyzeDomainCorrelation(data) {\r\n  const domains = getAllDomains(data);\r\n  if (domains.length < 2) return null;\r\n\r\n  const domainScores = {};\r\n  domains.forEach((domain) => {\r\n    domainScores[domain] = data\r\n      .filter((d) => d.domains && d.domains[domain] !== undefined)\r\n      .map((d) => d.domains[domain]);\r\n  });\r\n\r\n  // Find domain with lowest average\r\n  let lowestDomain = null;\r\n  let lowestAvg = 1;\r\n\r\n  for (const [domain, scores] of Object.entries(domainScores)) {\r\n    if (scores.length === 0) continue;\r\n    const avg = average(scores);\r\n    if (avg < lowestAvg) {\r\n      lowestAvg = avg;\r\n      lowestDomain = domain;\r\n    }\r\n  }\r\n\r\n  if (lowestDomain && lowestAvg < 0.4) {\r\n    return `${capitalizeFirst(\r\n      lowestDomain\r\n    )} needs attention (avg: ${lowestAvg.toFixed(2)})`;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Analyzes consistency of tracking\r\n */\r\nfunction analyzeConsistency(data) {\r\n  const daysInMonth = 30; // Approximate\r\n  const coverage = (data.length / daysInMonth) * 100;\r\n\r\n  if (coverage < 50) {\r\n    return `Low tracking coverage: ${coverage.toFixed(0)}% of days recorded`;\r\n  } else if (coverage > 90) {\r\n    return `Excellent tracking consistency: ${coverage.toFixed(0)}% coverage`;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Analyzes weekend vs weekday patterns\r\n */\r\nfunction analyzeWeekendPattern(data) {\r\n  const weekdays = [];\r\n  const weekends = [];\r\n\r\n  data.forEach((d) => {\r\n    const date = new Date(d.date);\r\n    const day = date.getDay();\r\n    const score = calculateDailyScore(d);\r\n\r\n    if (score === null) return;\r\n\r\n    if (day === 0 || day === 6) {\r\n      weekends.push(score);\r\n    } else {\r\n      weekdays.push(score);\r\n    }\r\n  });\r\n\r\n  if (weekdays.length < 3 || weekends.length < 2) return null;\r\n\r\n  const weekdayAvg = average(weekdays);\r\n  const weekendAvg = average(weekends);\r\n  const diff = weekendAvg - weekdayAvg;\r\n\r\n  if (Math.abs(diff) > 0.15) {\r\n    if (diff > 0) {\r\n      return \"Weekend scores consistently higher than weekdays\";\r\n    } else {\r\n      return \"Weekday performance exceeds weekend habits\";\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Helper functions\r\n */\r\n\r\nfunction calculateDailyScore(day) {\r\n  if (!day || !day.domains) return null;\r\n  const scores = Object.values(day.domains);\r\n  if (scores.length === 0) return null;\r\n  return scores.reduce((sum, score) => sum + score, 0) / scores.length;\r\n}\r\n\r\nfunction average(numbers) {\r\n  if (numbers.length === 0) return 0;\r\n  return numbers.reduce((sum, n) => sum + n, 0) / numbers.length;\r\n}\r\n\r\nfunction getAllDomains(data) {\r\n  const domains = new Set();\r\n  data.forEach((d) => {\r\n    if (d.domains) {\r\n      Object.keys(d.domains).forEach((domain) => domains.add(domain));\r\n    }\r\n  });\r\n  return Array.from(domains);\r\n}\r\n\r\nfunction capitalizeFirst(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n","/**\r\n * Data Migration Utility\r\n * Import JSON files from /public/data/months into LocalStorage\r\n */\r\n\r\nimport { saveMonth } from \"./storage.js\";\r\n\r\n/**\r\n * Migrates JSON file data to LocalStorage\r\n * @param {string} year - Year\r\n * @param {string} month - Month (2 digits)\r\n * @returns {Promise<boolean>} Success status\r\n */\r\nexport async function migrateMonthFromJSON(year, month) {\r\n  try {\r\n    const response = await fetch(`/data/months/${year}-${month}.json`);\r\n\r\n    if (!response.ok) {\r\n      console.warn(`No JSON file found for ${year}-${month}`);\r\n      return false;\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (!Array.isArray(data)) {\r\n      console.error(`Invalid format for ${year}-${month}`);\r\n      return false;\r\n    }\r\n\r\n    // Save to LocalStorage\r\n    saveMonth(parseInt(year), parseInt(month), data);\r\n    console.log(`Migrated ${data.length} entries for ${year}-${month}`);\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`Failed to migrate ${year}-${month}:`, error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Auto-migrate current month if LocalStorage is empty\r\n */\r\nexport async function autoMigrate() {\r\n  const now = new Date();\r\n  const year = now.getFullYear();\r\n  const month = String(now.getMonth() + 1).padStart(2, \"0\");\r\n\r\n  await migrateMonthFromJSON(year, month);\r\n}\r\n","/**\n * LifeLab - Main Application Entry\n * Data-first analytical dashboard\n */\n\nimport \"./styles/base.css\";\nimport \"./styles/layout.css\";\nimport \"./styles/components.css\";\n\nimport { loadMonth } from \"./data/storage.js\";\nimport { renderLineGraph } from \"./graphs/lineGraph.js\";\nimport { renderHeatmap } from \"./graphs/heatmap.js\";\nimport { generateInsights } from \"./insights/analytics.js\";\nimport { autoMigrate } from \"./data/migrate.js\";\n\n/**\n * Initialize the application\n */\nasync function init() {\n  try {\n    showLoading();\n\n    // Auto-migrate sample data if needed\n    const now = new Date();\n    let data = loadMonth(now.getFullYear(), now.getMonth() + 1);\n\n    if (data.length === 0) {\n      // Try to load from JSON file\n      await autoMigrate();\n      data = loadMonth(now.getFullYear(), now.getMonth() + 1);\n    }\n\n    if (data.length === 0) {\n      showEmptyState();\n      return;\n    }\n\n    // Render visualizations\n    renderVisualizations(data);\n  } catch (error) {\n    console.error(\"Failed to initialize:\", error);\n    showError(error.message);\n  }\n}\n\n/**\n * Render all visualizations\n */\nfunction renderVisualizations(data) {\n  // Line graph\n  const lineGraphContainer = document.getElementById(\"line-graph\");\n  if (lineGraphContainer) {\n    renderLineGraph(data, lineGraphContainer);\n  }\n\n  // Heatmap (show current month data)\n  const heatmapContainer = document.getElementById(\"heatmap\");\n  if (heatmapContainer) {\n    renderHeatmap(data, heatmapContainer);\n  }\n\n  // Insights\n  const insights = generateInsights(data);\n  const insightsList = document.getElementById(\"insights-list\");\n  if (insightsList) {\n    insightsList.innerHTML = insights\n      .map((insight) => `<li>${insight}</li>`)\n      .join(\"\");\n  }\n}\n\n/**\n * Show loading state\n */\nfunction showLoading() {\n  const containers = [\"line-graph\", \"heatmap\", \"insights-list\"];\n  containers.forEach((id) => {\n    const el = document.getElementById(id);\n    if (el) {\n      el.innerHTML = '<div class=\"loading\">Loading data</div>';\n    }\n  });\n}\n\n/**\n * Show empty state\n */\nfunction showEmptyState() {\n  const lineGraphContainer = document.getElementById(\"line-graph\");\n  if (lineGraphContainer) {\n    lineGraphContainer.innerHTML = `\n      <div class=\"empty-state\">\n        <p>No data available for the current month.</p>\n        <p>Go to <a href=\"/notebook.html\">Notebook</a> to start tracking!</p>\n      </div>\n    `;\n  }\n\n  const heatmapContainer = document.getElementById(\"heatmap\");\n  if (heatmapContainer) {\n    heatmapContainer.innerHTML = \"\";\n  }\n\n  const insightsList = document.getElementById(\"insights-list\");\n  if (insightsList) {\n    insightsList.innerHTML = \"<li>Start tracking to generate insights</li>\";\n  }\n}\n\n/**\n * Show error state\n */\nfunction showError(message) {\n  const lineGraphContainer = document.getElementById(\"line-graph\");\n  if (lineGraphContainer) {\n    lineGraphContainer.innerHTML = `\n      <div class=\"empty-state\">\n        <p>Error: ${message}</p>\n      </div>\n    `;\n  }\n}\n\n// Start the app\ninit();\n"],"names":["STORAGE_KEY","loadFromLocalStorage","data","localStorage","getItem","JSON","parse","error","console","saveMonth","year","month","monthData","allData","String","padStart","setItem","stringify","saveToLocalStorage","loadMonth","renderLineGraph","container","options","width","height","marginTop","marginRight","marginBottom","marginLeft","innerHTML","chartWidth","chartHeight","svg","document","createElementNS","setAttribute","classList","add","chartGroup","maxDay","Math","max","map","d","Date","date","getDate","xAxis","appendChild","yAxis","i","value","y","label","textContent","toFixed","gridLine","points","day","score","domains","scores","Object","values","length","reduce","sum","calculateScore","x","sort","a","b","pathData","p","join","path","forEach","circle","title","xLabel","yLabel","renderHeatmap","cellSize","cellGap","getFullYear","weeks","dataMap","Map","firstDay","lastDay","currentWeek","currentDate","dayOfWeek","getDay","daysToMonday","setDate","dateStr","toISOString","split","dayData","get","push","groupByWeek","style","dayLabels","dayIdx","week","weekIdx","rect","color","intensity","floor","min","getHeatmapColor","generateInsights","insights","trend","calculateDailyScore","filter","s","firstHalf","slice","secondHalf","firstAvg","average","diff","abs","analyzeTrend","energyPattern","windowSize","minAvg","minDay","window","avg","analyzeEnergyPattern","correlation","Set","keys","domain","Array","from","getAllDomains","domainScores","lowestDomain","lowestAvg","entries","str","charAt","toUpperCase","analyzeDomainCorrelation","consistency","daysInMonth","coverage","analyzeConsistency","weekendPattern","weekdays","weekends","weekdayAvg","analyzeWeekendPattern","numbers","n","async","autoMigrate","now","getMonth","response","fetch","ok","warn","json","isArray","parseInt","log","migrateMonthFromJSON","id","el","getElementById","lineGraphContainer","heatmapContainer","insightsList","showEmptyState","insight","renderVisualizations","message","showError","init"],"mappings":"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"}