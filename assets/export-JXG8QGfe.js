function t(t,e,n){const r=`lifelab-${e}-${String(n).padStart(2,"0")}.json`;o(JSON.stringify(t,null,2),r,"application/json")}function e(t,e="lifelab-export.csv"){const n=new Set;t.forEach(t=>{t.domains&&Object.keys(t.domains).forEach(t=>n.add(t))});const r=Array.from(n).sort();o([["Date",...r,"Notes"].join(","),...t.map(t=>[t.date,...r.map(e=>t.domains[e]||""),`"${(t.notes||"").replace(/"/g,'""')}"`].join(","))].join("\n"),e,"text/csv")}function n(t){const e={exportDate:(new Date).toISOString(),version:"1.0",data:t},n=`lifelab-backup-${(new Date).toISOString().split("T")[0]}.json`;o(JSON.stringify(e,null,2),n,"application/json")}function o(t,e,n){const o=new Blob([t],{type:n}),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=e,a.click(),URL.revokeObjectURL(r)}function r(n,o,r){n.innerHTML='\n    <div class="import-export-section">\n      <h3>Export Data</h3>\n      <div class="export-buttons">\n        <button class="btn-secondary" id="export-json">Export as JSON</button>\n        <button class="btn-secondary" id="export-csv">Export as CSV</button>\n      </div>\n      \n      <h3>Import Data</h3>\n      <div class="import-area">\n        <input type="file" id="import-file" accept=".json" />\n        <button class="btn-primary" id="import-data">Import JSON</button>\n      </div>\n      \n      <div class="import-hint">\n        üìÅ Import will merge with existing data. Duplicate dates will be overwritten.\n      </div>\n    </div>\n  ',n.querySelector("#export-json").addEventListener("click",()=>{const e=new Date;t(o,e.getFullYear(),e.getMonth()+1)}),n.querySelector("#export-csv").addEventListener("click",()=>{e(o)}),n.querySelector("#import-data").addEventListener("click",async()=>{const t=n.querySelector("#import-file").files[0];if(t)try{const e=await async function(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=t=>{try{const n=JSON.parse(t.target.result);if(!Array.isArray(n))throw new Error("Invalid format: expected array of day records");if(!n.every(t=>t.date&&t.domains&&"object"==typeof t.domains))throw new Error("Invalid day records found");e(n)}catch(o){n(o)}},o.onerror=()=>n(new Error("Failed to read file")),o.readAsText(t)})}(t);r&&r(e),alert(`Successfully imported ${e.length} entries`)}catch(e){alert(`Import failed: ${e.message}`)}else alert("Please select a file to import")})}export{e as a,n as b,t as e,r};
//# sourceMappingURL=export-JXG8QGfe.js.map
