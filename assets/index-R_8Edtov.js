!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t="lifelab_data";function e(){try{const e=localStorage.getItem(t);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load from localStorage:",e),{}}}function n(n,r,o){const i=e();return i[`${n}-${String(r).padStart(2,"0")}`]=o,function(e){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(n){return console.error("Failed to save to localStorage:",n),!1}}(i)}function r(t,n){return e()[`${t}-${String(n).padStart(2,"0")}`]||[]}function o(t,e,n={}){const{width:r=800,height:o=300,marginTop:i=20,marginRight:a=20,marginBottom:s=40,marginLeft:c=50}=n;e.innerHTML="";const l=r-c-a,d=o-i-s,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("viewBox",`0 0 ${r} ${o}`),u.classList.add("svg-graph");const h=document.createElementNS("http://www.w3.org/2000/svg","g");h.setAttribute("transform",`translate(${c}, ${i})`);const g=Math.max(...t.map(t=>new Date(t.date).getDate())),p=document.createElementNS("http://www.w3.org/2000/svg","line");p.setAttribute("x1",0),p.setAttribute("y1",d),p.setAttribute("x2",l),p.setAttribute("y2",d),p.classList.add("axis-line"),h.appendChild(p);const f=document.createElementNS("http://www.w3.org/2000/svg","line");f.setAttribute("x1",0),f.setAttribute("y1",0),f.setAttribute("x2",0),f.setAttribute("y2",d),f.classList.add("axis-line"),h.appendChild(f);for(let b=0;b<=4;b++){const t=.25*b,e=d-t*d,n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("x",-10),n.setAttribute("y",e+4),n.setAttribute("text-anchor","end"),n.textContent=t.toFixed(2),h.appendChild(n);const r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttribute("x1",0),r.setAttribute("y1",e),r.setAttribute("x2",l),r.setAttribute("y2",e),r.setAttribute("stroke","#e0e0e0"),r.setAttribute("stroke-dasharray","2,2"),h.appendChild(r)}const m=t.map(t=>{const e=new Date(t.date).getDate(),n=function(t){if(!t.domains)return 0;const e=Object.values(t.domains);return 0===e.length?0:e.reduce((t,e)=>t+e,0)/e.length}(t);return{x:e/g*l,y:d-n*d,day:e,score:n}});if(m.sort((t,e)=>t.day-e.day),m.length>0){const t=m.map((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`).join(" "),e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",t),e.classList.add("data-line"),h.appendChild(e),m.forEach(t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",3),e.classList.add("data-point");const n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=`Day ${t.day}: ${t.score.toFixed(2)}`,e.appendChild(n),h.appendChild(e)})}const w=document.createElementNS("http://www.w3.org/2000/svg","text");w.setAttribute("x",l/2),w.setAttribute("y",d+30),w.setAttribute("text-anchor","middle"),w.textContent="Day of Month",h.appendChild(w);const y=document.createElementNS("http://www.w3.org/2000/svg","text");y.setAttribute("x",-d/2),y.setAttribute("y",-35),y.setAttribute("text-anchor","middle"),y.setAttribute("transform",`rotate(-90, -${d/2}, -35)`),y.textContent="Daily Score",h.appendChild(y),u.appendChild(h),e.appendChild(u)}function i(t,e,n={}){const{cellSize:r=12,cellGap:o=2,year:i=(new Date).getFullYear()}=n;e.innerHTML="";const a=function(t,e){const n=[],r=new Map(t.map(t=>[t.date,t])),o=new Date(e,0,1),i=new Date(e,11,31);let a=[],s=new Date(o);const c=s.getDay(),l=0===c?-6:1-c;s.setDate(s.getDate()+l);for(;s<=i;){const t=s.toISOString().split("T")[0],e=r.get(t);a.push(e||null),7===a.length&&(n.push(a),a=[]),s.setDate(s.getDate()+1)}a.length>0&&n.push(a);return n}(t,i),s=53*(r+o),c=7*(r+o)+40,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox",`0 0 ${s} ${c}`),l.style.width="100%",l.style.height="auto";const d=["Mon","Wed","Fri"];[0,2,4].forEach((t,e)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("x",0),n.setAttribute("y",20+t*(r+o)+r/2+4),n.setAttribute("text-anchor","start"),n.setAttribute("font-size","10px"),n.setAttribute("fill","#666"),n.textContent=d[e],l.appendChild(n)}),a.forEach((t,e)=>{t.forEach((t,n)=>{if(!t)return;const i=40+e*(r+o),a=20+n*(r+o),s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x",i),s.setAttribute("y",a),s.setAttribute("width",r),s.setAttribute("height",r),s.setAttribute("rx",2),s.classList.add("heatmap-cell");const c=function(t){if(!t||!t.domains)return 0;const e=Object.values(t.domains);return 0===e.length?0:e.reduce((t,e)=>t+e,0)/e.length}(t),d=function(t){if(0===t)return"#f0f0f0";const e=Math.floor(4*t);return["#f0f0f0","#d0d0d0","#a0a0a0","#707070","#4a5568"][Math.min(e,4)]}(c);s.setAttribute("fill",d);const u=document.createElementNS("http://www.w3.org/2000/svg","title");u.textContent=`${t.date}: ${c.toFixed(2)}`,s.appendChild(u),l.appendChild(s)})}),e.appendChild(l)}function a(t){if(!t||0===t.length)return["No data available for analysis"];const e=[],n=function(t){const e=t.map(t=>s(t)).filter(t=>null!==t);if(e.length<5)return null;const n=e.slice(0,Math.floor(e.length/2)),r=e.slice(Math.floor(e.length/2)),o=c(n),i=c(r)-o;return Math.abs(i)<.05?"Scores remained stable throughout the month":i>0?`Upward trend detected: ${(100*i).toFixed(1)}% improvement`:`Scores dipped in second half by ${Math.abs(100*i).toFixed(1)}%`}(t);n&&e.push(n);const r=function(t){const e=t.map((t,e)=>({day:e+1,score:s(t)})).filter(t=>null!==t.score);if(e.length<10)return null;const n=5;let r=1,o=0;for(let i=0;i<=e.length-n;i++){const t=e.slice(i,i+n),a=c(t.map(t=>t.score));a<r&&(r=a,o=t[Math.floor(n/2)].day)}if(r<.5)return`Energy dips around day ${o}`;return null}(t);r&&e.push(r);const o=function(t){const e=function(t){const e=new Set;return t.forEach(t=>{t.domains&&Object.keys(t.domains).forEach(t=>e.add(t))}),Array.from(e)}(t);if(e.length<2)return null;const n={};e.forEach(e=>{n[e]=t.filter(t=>t.domains&&void 0!==t.domains[e]).map(t=>t.domains[e])});let r=null,o=1;for(const[a,s]of Object.entries(n)){if(0===s.length)continue;const t=c(s);t<o&&(o=t,r=a)}if(r&&o<.4)return`${i=r,i.charAt(0).toUpperCase()+i.slice(1)} needs attention (avg: ${o.toFixed(2)})`;var i;return null}(t);o&&e.push(o);const i=function(t){const e=30,n=t.length/e*100;if(n<50)return`Low tracking coverage: ${n.toFixed(0)}% of days recorded`;if(n>90)return`Excellent tracking consistency: ${n.toFixed(0)}% coverage`;return null}(t);i&&e.push(i);const a=function(t){const e=[],n=[];if(t.forEach(t=>{const r=new Date(t.date).getDay(),o=s(t);null!==o&&(0===r||6===r?n.push(o):e.push(o))}),e.length<3||n.length<2)return null;const r=c(e),o=c(n)-r;if(Math.abs(o)>.15)return o>0?"Weekend scores consistently higher than weekdays":"Weekday performance exceeds weekend habits";return null}(t);return a&&e.push(a),e.length>0?e:["Gathering patterns..."]}function s(t){if(!t||!t.domains)return null;const e=Object.values(t.domains);return 0===e.length?null:e.reduce((t,e)=>t+e,0)/e.length}function c(t){return 0===t.length?0:t.reduce((t,e)=>t+e,0)/t.length}async function l(){const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0");await async function(t,e){try{const r=await fetch(`/data/months/${t}-${e}.json`);if(!r.ok)return console.warn(`No JSON file found for ${t}-${e}`),!1;const o=await r.json();return Array.isArray(o)?(n(parseInt(t),parseInt(e),o),console.log(`Migrated ${o.length} entries for ${t}-${e}`),!0):(console.error(`Invalid format for ${t}-${e}`),!1)}catch(r){return console.error(`Failed to migrate ${t}-${e}:`,r),!1}}(e,r)}!async function(){try{["line-graph","heatmap","insights-list"].forEach(t=>{const e=document.getElementById(t);e&&(e.innerHTML='<div class="loading">Loading data</div>')});const t=new Date;let e=r(t.getFullYear(),t.getMonth()+1);if(0===e.length&&(await l(),e=r(t.getFullYear(),t.getMonth()+1)),0===e.length)return void function(){const t=document.getElementById("line-graph");t&&(t.innerHTML='\n      <div class="empty-state">\n        <p>No data available for the current month.</p>\n        <p>Go to <a href="/notebook.html">Notebook</a> to start tracking!</p>\n      </div>\n    ');const e=document.getElementById("heatmap");e&&(e.innerHTML="");const n=document.getElementById("insights-list");n&&(n.innerHTML="<li>Start tracking to generate insights</li>")}();!function(t){const e=document.getElementById("line-graph");e&&o(t,e);const n=document.getElementById("heatmap");n&&i(t,n);const r=a(t),s=document.getElementById("insights-list");s&&(s.innerHTML=r.map(t=>`<li>${t}</li>`).join(""))}(e)}catch(t){console.error("Failed to initialize:",t),function(t){const e=document.getElementById("line-graph");e&&(e.innerHTML=`\n      <div class="empty-state">\n        <p>Error: ${t}</p>\n      </div>\n    `)}(t.message)}}();
//# sourceMappingURL=index-R_8Edtov.js.map
