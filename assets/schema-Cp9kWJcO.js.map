{"version":3,"file":"schema-Cp9kWJcO.js","sources":["../../src/data/schema.js"],"sourcesContent":["/**\r\n * Data Schema for LifeLab\r\n *\r\n * Core principle: One day = one record\r\n * Each day tracks multiple domains (0-1 scale)\r\n * Extensible design - new domains can be added without breaking old data\r\n */\r\n\r\n/**\r\n * Creates a new day record\r\n * @param {string} date - ISO date string (YYYY-MM-DD)\r\n * @param {Object} domains - Object mapping domain names to scores (0-1)\r\n * @param {string} notes - Optional notes for the day\r\n * @returns {Object} Day record\r\n */\r\nexport function createDayRecord(date, domains = {}, notes = \"\") {\r\n  return {\r\n    date,\r\n    domains,\r\n    notes,\r\n  };\r\n}\r\n\r\n/**\r\n * Default domains for tracking\r\n * Can be extended without breaking existing data\r\n */\r\nexport const DEFAULT_DOMAINS = {\r\n  health: 0,\r\n  skills: 0,\r\n  finance: 0,\r\n  academics: 0,\r\n};\r\n\r\n/**\r\n * Validates a day record\r\n * @param {Object} day - Day record to validate\r\n * @returns {boolean} True if valid\r\n */\r\nexport function isValidDayRecord(day) {\r\n  if (!day || typeof day !== \"object\") return false;\r\n  if (!day.date || typeof day.date !== \"string\") return false;\r\n  if (!day.domains || typeof day.domains !== \"object\") return false;\r\n\r\n  // Validate domain scores are between 0 and 1\r\n  for (const [domain, score] of Object.entries(day.domains)) {\r\n    if (typeof score !== \"number\" || score < 0 || score > 1) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Calculates weighted daily score\r\n * @param {Object} day - Day record\r\n * @returns {number|null} Average score or null if no domains\r\n */\r\nexport function calculateDailyScore(day) {\r\n  if (!day || !day.domains) return null;\r\n\r\n  const scores = Object.values(day.domains);\r\n  if (scores.length === 0) return null;\r\n\r\n  const sum = scores.reduce((acc, score) => acc + score, 0);\r\n  return sum / scores.length;\r\n}\r\n\r\n/**\r\n * Gets all unique domains across an array of day records\r\n * @param {Array} days - Array of day records\r\n * @returns {Set} Set of domain names\r\n */\r\nexport function getAllDomains(days) {\r\n  const domains = new Set();\r\n  days.forEach((day) => {\r\n    if (day.domains) {\r\n      Object.keys(day.domains).forEach((domain) => domains.add(domain));\r\n    }\r\n  });\r\n  return domains;\r\n}\r\n"],"names":["createDayRecord","date","domains","notes","DEFAULT_DOMAINS","health","skills","finance","academics","getAllDomains","days","Set","forEach","day","Object","keys","domain","add"],"mappings":"AAeO,SAASA,EAAgBC,EAAMC,EAAU,CAAA,EAAIC,EAAQ,IAC1D,MAAO,CACLF,OACAC,UACAC,QAEJ,CAMY,MAACC,EAAkB,CAC7BC,OAAQ,EACRC,OAAQ,EACRC,QAAS,EACTC,UAAW,GA2CN,SAASC,EAAcC,GAC5B,MAAMR,MAAcS,IAMpB,OALAD,EAAKE,QAASC,IACRA,EAAIX,SACNY,OAAOC,KAAKF,EAAIX,SAASU,QAASI,GAAWd,EAAQe,IAAID,MAGtDd,CACT"}