{"version":3,"file":"year-B3odhJT9.js","sources":["../../src/pages/year.js"],"sourcesContent":["/**\r\n * Year Review Page\r\n * Annual overview with statistics and comparisons\r\n */\r\n\r\nimport \"../styles/base.css\";\r\nimport \"../styles/layout.css\";\r\nimport \"../styles/components.css\";\r\n\r\nimport { getAvailableMonths, loadMonth } from \"../data/storage.js\";\r\nimport { renderHeatmap } from \"../graphs/heatmap.js\";\r\nimport { getAllDomains } from \"../data/schema.js\";\r\n\r\nlet currentYear = new Date().getFullYear();\r\nlet yearData = [];\r\n\r\n/**\r\n * Initialize year page\r\n */\r\nasync function init() {\r\n  updateYearDisplay();\r\n  loadYearData();\r\n  setupNavigation();\r\n}\r\n\r\n/**\r\n * Load all data for the year\r\n */\r\nfunction loadYearData() {\r\n  yearData = [];\r\n\r\n  for (let month = 1; month <= 12; month++) {\r\n    const monthData = loadMonth(currentYear, month);\r\n    yearData.push(...monthData);\r\n  }\r\n\r\n  renderYearVisualization();\r\n  renderYearStats();\r\n  renderMonthlyComparison();\r\n  renderDomainTrends();\r\n  renderYearInsights();\r\n}\r\n\r\n/**\r\n * Update year display\r\n */\r\nfunction updateYearDisplay() {\r\n  document.getElementById(\"current-year-display\").textContent = currentYear;\r\n}\r\n\r\n/**\r\n * Setup year navigation\r\n */\r\nfunction setupNavigation() {\r\n  document.getElementById(\"prev-year\").addEventListener(\"click\", () => {\r\n    currentYear--;\r\n    updateYearDisplay();\r\n    loadYearData();\r\n  });\r\n\r\n  document.getElementById(\"next-year\").addEventListener(\"click\", () => {\r\n    currentYear++;\r\n    updateYearDisplay();\r\n    loadYearData();\r\n  });\r\n}\r\n\r\n/**\r\n * Render yearly heatmap\r\n */\r\nfunction renderYearVisualization() {\r\n  const container = document.getElementById(\"year-heatmap\");\r\n\r\n  if (yearData.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"empty-state\">\r\n        <p>No data for ${currentYear}.</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  renderHeatmap(yearData, container, { year: currentYear });\r\n}\r\n\r\n/**\r\n * Render year statistics\r\n */\r\nfunction renderYearStats() {\r\n  const container = document.getElementById(\"year-stats\");\r\n\r\n  if (yearData.length === 0) {\r\n    container.innerHTML = '<p class=\"empty-state\">No data available</p>';\r\n    return;\r\n  }\r\n\r\n  const stats = calculateYearStats();\r\n\r\n  container.innerHTML = `\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${stats.totalDays}</div>\r\n      <div class=\"stat-label\">Days Tracked</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${(stats.coverage * 100).toFixed(0)}%</div>\r\n      <div class=\"stat-label\">Coverage</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${stats.avgScore.toFixed(2)}</div>\r\n      <div class=\"stat-label\">Average Score</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${stats.bestMonth}</div>\r\n      <div class=\"stat-label\">Best Month</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${stats.longestStreak}</div>\r\n      <div class=\"stat-label\">Longest Streak</div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-value\">${stats.topDomain}</div>\r\n      <div class=\"stat-label\">Top Domain</div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Calculate year statistics\r\n */\r\nfunction calculateYearStats() {\r\n  const totalDays = yearData.length;\r\n  const daysInYear = isLeapYear(currentYear) ? 366 : 365;\r\n  const coverage = totalDays / daysInYear;\r\n\r\n  // Average score\r\n  const scores = yearData\r\n    .map((d) => calculateDayScore(d))\r\n    .filter((s) => s !== null);\r\n  const avgScore =\r\n    scores.length > 0\r\n      ? scores.reduce((sum, s) => sum + s, 0) / scores.length\r\n      : 0;\r\n\r\n  // Best month\r\n  const monthlyAvgs = [];\r\n  for (let m = 1; m <= 12; m++) {\r\n    const monthData = yearData.filter(\r\n      (d) => new Date(d.date).getMonth() + 1 === m\r\n    );\r\n    if (monthData.length > 0) {\r\n      const monthScores = monthData\r\n        .map((d) => calculateDayScore(d))\r\n        .filter((s) => s !== null);\r\n      const avg =\r\n        monthScores.reduce((sum, s) => sum + s, 0) / monthScores.length;\r\n      monthlyAvgs.push({ month: m, avg });\r\n    }\r\n  }\r\n  const bestMonthObj = monthlyAvgs.sort((a, b) => b.avg - a.avg)[0];\r\n  const bestMonth = bestMonthObj\r\n    ? new Date(currentYear, bestMonthObj.month - 1).toLocaleDateString(\r\n        \"en-US\",\r\n        { month: \"short\" }\r\n      )\r\n    : \"—\";\r\n\r\n  // Longest streak\r\n  const longestStreak = calculateLongestStreak(yearData);\r\n\r\n  // Top domain\r\n  const domains = getAllDomains(yearData);\r\n  let topDomain = \"—\";\r\n  let maxAvg = 0;\r\n\r\n  domains.forEach((domain) => {\r\n    const domainScores = yearData\r\n      .filter((d) => d.domains && d.domains[domain] !== undefined)\r\n      .map((d) => d.domains[domain]);\r\n    const avg =\r\n      domainScores.reduce((sum, s) => sum + s, 0) / domainScores.length;\r\n    if (avg > maxAvg) {\r\n      maxAvg = avg;\r\n      topDomain = capitalizeFirst(domain);\r\n    }\r\n  });\r\n\r\n  return {\r\n    totalDays,\r\n    coverage,\r\n    avgScore,\r\n    bestMonth,\r\n    longestStreak,\r\n    topDomain,\r\n  };\r\n}\r\n\r\n/**\r\n * Render monthly comparison\r\n */\r\nfunction renderMonthlyComparison() {\r\n  const container = document.getElementById(\"monthly-comparison\");\r\n\r\n  const monthlyData = [];\r\n  const monthNames = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n\r\n  for (let m = 1; m <= 12; m++) {\r\n    const monthData = yearData.filter(\r\n      (d) => new Date(d.date).getMonth() + 1 === m\r\n    );\r\n    if (monthData.length > 0) {\r\n      const scores = monthData\r\n        .map((d) => calculateDayScore(d))\r\n        .filter((s) => s !== null);\r\n      const avg = scores.reduce((sum, s) => sum + s, 0) / scores.length;\r\n      monthlyData.push({\r\n        month: monthNames[m - 1],\r\n        avg,\r\n        count: monthData.length,\r\n      });\r\n    }\r\n  }\r\n\r\n  if (monthlyData.length === 0) {\r\n    container.innerHTML = '<p class=\"empty-state\">No monthly data</p>';\r\n    return;\r\n  }\r\n\r\n  const maxAvg = Math.max(...monthlyData.map((m) => m.avg));\r\n\r\n  container.innerHTML = `\r\n    <div class=\"monthly-bars\">\r\n      ${monthlyData\r\n        .map(\r\n          (m) => `\r\n        <div class=\"month-bar\">\r\n          <div class=\"bar-fill\" style=\"height: ${\r\n            (m.avg / maxAvg) * 100\r\n          }%\"></div>\r\n          <div class=\"bar-label\">${m.month}</div>\r\n          <div class=\"bar-value\">${m.avg.toFixed(2)}</div>\r\n        </div>\r\n      `\r\n        )\r\n        .join(\"\")}\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render domain trends\r\n */\r\nfunction renderDomainTrends() {\r\n  const container = document.getElementById(\"domain-trends\");\r\n\r\n  const domains = getAllDomains(yearData);\r\n  if (domains.size === 0) {\r\n    container.innerHTML = '<p class=\"empty-state\">No domain data</p>';\r\n    return;\r\n  }\r\n\r\n  const domainStats = [];\r\n  domains.forEach((domain) => {\r\n    const scores = yearData\r\n      .filter((d) => d.domains && d.domains[domain] !== undefined)\r\n      .map((d) => d.domains[domain]);\r\n\r\n    const avg = scores.reduce((sum, s) => sum + s, 0) / scores.length;\r\n    const trend = calculateTrend(yearData, domain);\r\n\r\n    domainStats.push({ domain, avg, trend, count: scores.length });\r\n  });\r\n\r\n  domainStats.sort((a, b) => b.avg - a.avg);\r\n\r\n  container.innerHTML = `\r\n    <div class=\"domain-trends-list\">\r\n      ${domainStats\r\n        .map(\r\n          (d) => `\r\n        <div class=\"domain-trend-item\">\r\n          <div class=\"domain-name\">${capitalizeFirst(d.domain)}</div>\r\n          <div class=\"domain-bar\">\r\n            <div class=\"domain-bar-fill\" style=\"width: ${d.avg * 100}%\"></div>\r\n          </div>\r\n          <div class=\"domain-avg\">${d.avg.toFixed(2)}</div>\r\n          <div class=\"domain-trend ${\r\n            d.trend > 0 ? \"positive\" : d.trend < 0 ? \"negative\" : \"neutral\"\r\n          }\">\r\n            ${d.trend > 0 ? \"↗\" : d.trend < 0 ? \"↘\" : \"→\"} ${Math.abs(\r\n            d.trend * 100\r\n          ).toFixed(1)}%\r\n          </div>\r\n        </div>\r\n      `\r\n        )\r\n        .join(\"\")}\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render year insights\r\n */\r\nfunction renderYearInsights() {\r\n  const container = document.getElementById(\"year-insights\");\r\n\r\n  if (yearData.length === 0) {\r\n    container.innerHTML = \"<li>No data to analyze</li>\";\r\n    return;\r\n  }\r\n\r\n  const insights = generateYearInsights();\r\n\r\n  container.innerHTML = insights\r\n    .map((insight) => `<li>${insight}</li>`)\r\n    .join(\"\");\r\n}\r\n\r\n/**\r\n * Generate insights for the year\r\n */\r\nfunction generateYearInsights() {\r\n  const insights = [];\r\n  const stats = calculateYearStats();\r\n\r\n  // Coverage insight\r\n  if (stats.coverage > 0.9) {\r\n    insights.push(\r\n      `Excellent consistency: tracked ${(stats.coverage * 100).toFixed(\r\n        0\r\n      )}% of days`\r\n    );\r\n  } else if (stats.coverage < 0.5) {\r\n    insights.push(\r\n      `Low tracking coverage: only ${(stats.coverage * 100).toFixed(\r\n        0\r\n      )}% of days recorded`\r\n    );\r\n  }\r\n\r\n  // Performance insight\r\n  if (stats.avgScore > 0.7) {\r\n    insights.push(\r\n      `Strong year overall with ${stats.avgScore.toFixed(2)} average score`\r\n    );\r\n  } else if (stats.avgScore < 0.4) {\r\n    insights.push(\r\n      `Challenging year with ${stats.avgScore.toFixed(2)} average score`\r\n    );\r\n  }\r\n\r\n  // Streak insight\r\n  if (stats.longestStreak > 30) {\r\n    insights.push(`Impressive ${stats.longestStreak}-day tracking streak`);\r\n  }\r\n\r\n  // Seasonal patterns\r\n  const q1 = getQuarterAvg(1);\r\n  const q4 = getQuarterAvg(4);\r\n  if (q1 !== null && q4 !== null) {\r\n    const diff = q4 - q1;\r\n    if (diff > 0.15) {\r\n      insights.push(\r\n        `Strong finish: Q4 outperformed Q1 by ${(diff * 100).toFixed(0)}%`\r\n      );\r\n    } else if (diff < -0.15) {\r\n      insights.push(\r\n        `Started strong: Q1 outperformed Q4 by ${(Math.abs(diff) * 100).toFixed(\r\n          0\r\n        )}%`\r\n      );\r\n    }\r\n  }\r\n\r\n  return insights.length > 0 ? insights : [\"Gathering yearly patterns...\"];\r\n}\r\n\r\n/**\r\n * Helper functions\r\n */\r\n\r\nfunction calculateDayScore(day) {\r\n  if (!day || !day.domains) return null;\r\n  const scores = Object.values(day.domains);\r\n  if (scores.length === 0) return null;\r\n  return scores.reduce((sum, s) => sum + s, 0) / scores.length;\r\n}\r\n\r\nfunction calculateLongestStreak(data) {\r\n  if (data.length === 0) return 0;\r\n\r\n  const dates = data.map((d) => new Date(d.date)).sort((a, b) => a - b);\r\n  let longest = 1;\r\n  let current = 1;\r\n\r\n  for (let i = 1; i < dates.length; i++) {\r\n    const dayDiff = (dates[i] - dates[i - 1]) / (1000 * 60 * 60 * 24);\r\n    if (dayDiff === 1) {\r\n      current++;\r\n      longest = Math.max(longest, current);\r\n    } else {\r\n      current = 1;\r\n    }\r\n  }\r\n\r\n  return longest;\r\n}\r\n\r\nfunction calculateTrend(data, domain) {\r\n  const filtered = data.filter(\r\n    (d) => d.domains && d.domains[domain] !== undefined\r\n  );\r\n  if (filtered.length < 10) return 0;\r\n\r\n  const firstHalf = filtered.slice(0, Math.floor(filtered.length / 2));\r\n  const secondHalf = filtered.slice(Math.floor(filtered.length / 2));\r\n\r\n  const firstAvg =\r\n    firstHalf.reduce((sum, d) => sum + d.domains[domain], 0) / firstHalf.length;\r\n  const secondAvg =\r\n    secondHalf.reduce((sum, d) => sum + d.domains[domain], 0) /\r\n    secondHalf.length;\r\n\r\n  return secondAvg - firstAvg;\r\n}\r\n\r\nfunction getQuarterAvg(quarter) {\r\n  const months =\r\n    quarter === 1\r\n      ? [1, 2, 3]\r\n      : quarter === 2\r\n      ? [4, 5, 6]\r\n      : quarter === 3\r\n      ? [7, 8, 9]\r\n      : [10, 11, 12];\r\n  const quarterData = yearData.filter((d) =>\r\n    months.includes(new Date(d.date).getMonth() + 1)\r\n  );\r\n\r\n  if (quarterData.length === 0) return null;\r\n\r\n  const scores = quarterData\r\n    .map((d) => calculateDayScore(d))\r\n    .filter((s) => s !== null);\r\n  return scores.reduce((sum, s) => sum + s, 0) / scores.length;\r\n}\r\n\r\nfunction isLeapYear(year) {\r\n  return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\r\n}\r\n\r\nfunction capitalizeFirst(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n// Initialize\r\ninit();\r\n"],"names":["currentYear","Date","getFullYear","yearData","loadYearData","month","monthData","loadMonth","push","container","document","getElementById","length","innerHTML","renderHeatmap","year","renderYearVisualization","stats","calculateYearStats","totalDays","coverage","toFixed","avgScore","bestMonth","longestStreak","topDomain","renderYearStats","monthlyData","monthNames","m","filter","d","date","getMonth","scores","map","calculateDayScore","s","avg","reduce","sum","count","maxAvg","Math","max","join","renderMonthlyComparison","domains","getAllDomains","size","domainStats","forEach","domain","trend","data","filtered","firstHalf","slice","floor","secondHalf","firstAvg","secondAvg","calculateTrend","sort","a","b","capitalizeFirst","abs","renderDomainTrends","insights","q1","getQuarterAvg","q4","diff","generateYearInsights","insight","renderYearInsights","updateYearDisplay","textContent","monthlyAvgs","monthScores","bestMonthObj","toLocaleDateString","dates","longest","current","i","calculateLongestStreak","domainScores","day","Object","values","quarter","months","quarterData","includes","str","charAt","toUpperCase","async","addEventListener","init"],"mappings":"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"}