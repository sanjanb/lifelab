import{i as A}from"./lifecycle.BvhUjWVf.js";import{o as B}from"./index-client.DcO2RGGq.js";import{f as p,a as c,p as K,b as j,c as v,r,s as f,e as y,B as q,C as D,g as z,m as F,j as _}from"./template.BZWBxZBu.js";import{i as M}from"./if.fQTVglCE.js";import{p as C}from"./props.C-M9dvSZ.js";/* empty css                          */var G=p('<div class="closed-notice svelte-1vyucu9"><div class="closed-icon svelte-1vyucu9">ðŸ”’</div> <div class="closed-content svelte-1vyucu9"><div class="closed-title svelte-1vyucu9">Month Closed</div> <div class="closed-description svelte-1vyucu9">This month has been archived. All entries are read-only.</div></div> <button class="reopen-button svelte-1vyucu9">Reopen Month</button></div>'),H=p('<div class="closure-prompt svelte-1vyucu9"><div class="prompt-content svelte-1vyucu9"><div class="prompt-title svelte-1vyucu9">Ready to close this month?</div> <div class="prompt-description svelte-1vyucu9">Closing the month will mark it as complete and make it read-only. You can reopen it later if needed.</div></div> <button class="close-button svelte-1vyucu9">Close Month</button></div>'),L=p('<div class="confirmation-dialog svelte-1vyucu9"><div class="dialog-content svelte-1vyucu9"><div class="dialog-title svelte-1vyucu9">Close this month?</div> <div class="dialog-message svelte-1vyucu9">This will archive the month and make all entries read-only. Analytics will remain visible.</div></div> <div class="dialog-actions svelte-1vyucu9"><button class="confirm-button svelte-1vyucu9">Yes, Close Month</button> <button class="cancel-button svelte-1vyucu9">Cancel</button></div></div>'),P=p('<div class="month-closure-container svelte-1vyucu9"><!></div>');function $(S,d){j(d,!1);let n=C(d,"year",8),s=C(d,"month",8),u=C(d,"isClosed",12,!1),m=F(!1),l=new Set;const b=`${n()}-${String(s()).padStart(2,"0")}`;B(()=>{const e=localStorage.getItem("lifelab_closedMonths");if(e)try{l=new Set(JSON.parse(e)),u(l.has(b))}catch(t){console.error("Error loading closed months:",t)}});function k(){_(m,!0)}function R(){l.add(b),localStorage.setItem("lifelab_closedMonths",JSON.stringify([...l])),u(!0),_(m,!1),window.dispatchEvent(new CustomEvent("monthClosed",{detail:{year:n(),month:s()}}));const e=s()===12?1:s()+1,i=`${s()===12?n()+1:n()}-${String(e).padStart(2,"0")}`;setTimeout(()=>{window.location.href=`/lifelab/notebook?month=${i}`},1500)}function x(){_(m,!1)}function E(){confirm("Reopen this month for editing?")&&(l.delete(b),localStorage.setItem("lifelab_closedMonths",JSON.stringify([...l])),u(!1),window.dispatchEvent(new CustomEvent("monthReopened",{detail:{year:n(),month:s()}})))}A();var g=P(),Y=v(g);{var I=e=>{var t=G(),i=f(v(t),4);r(t),y("click",i,E),c(e,t)},J=e=>{var t=q(),i=D(t);{var N=a=>{var o=H(),h=f(v(o),2);r(o),y("click",h,k),c(a,o)},O=a=>{var o=L(),h=f(v(o),2),w=v(h),T=f(w,2);r(h),r(o),y("click",w,R),y("click",T,x),c(a,o)};M(i,a=>{z(m)?a(O,!1):a(N)},!0)}c(e,t)};M(Y,e=>{u()?e(I):e(J,!1)})}r(g),c(S,g),K()}export{$ as default};
