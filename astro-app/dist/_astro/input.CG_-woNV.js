import{l as b,E as x,u as E,F as m,o as g,G as h,H as y,k as o,x as w,w as A}from"./template.BZWBxZBu.js";function q(e,f,r=f){var d=new WeakSet;b(e,"input",async l=>{var v=l?e.defaultValue:e.value;if(v=u(e)?i(v):v,r(v),o!==null&&d.add(o),await x(),v!==(v=f())){var c=e.selectionStart,s=e.selectionEnd,t=e.value.length;if(e.value=v??"",s!==null){var a=e.value.length;c===s&&s===t&&a>t?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=c,e.selectionEnd=Math.min(s,a))}}}),(y&&e.defaultValue!==e.value||E(f)==null&&e.value)&&(r(u(e)?i(e.value):e.value),o!==null&&d.add(o)),m(()=>{var l=f();if(e===document.activeElement){var v=w??o;if(d.has(v))return}u(e)&&l===i(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const _=new Set;function C(e,f,r,d,l=d){var v=r.getAttribute("type")==="checkbox",c=e;let s=!1;if(f!==null)for(var t of f)c=c[t]??=[];c.push(r),b(r,"change",()=>{var a=r.__value;v&&(a=k(c,a,r.checked)),l(a)},()=>l(v?[]:null)),m(()=>{var a=d();if(y&&r.defaultChecked!==r.checked){s=!0;return}v?(a=a||[],r.checked=a.includes(r.__value)):r.checked=A(r.__value,a)}),g(()=>{var a=c.indexOf(r);a!==-1&&c.splice(a,1)}),_.has(c)||(_.add(c),h(()=>{c.sort((a,n)=>a.compareDocumentPosition(n)===4?-1:1),_.delete(c)})),h(()=>{if(s){var a;if(v)a=k(c,a,r.checked);else{var n=c.find(S=>S.checked);a=n?.__value}l(a)}})}function k(e,f,r){for(var d=new Set,l=0;l<e.length;l+=1)e[l].checked&&d.add(e[l].__value);return r||d.delete(f),Array.from(d)}function u(e){var f=e.type;return f==="number"||f==="range"}function i(e){return e===""?null:+e}export{C as a,q as b};
