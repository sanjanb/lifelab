import{i as pe}from"./lifecycle.BvhUjWVf.js";import{o as de}from"./index-client.DcO2RGGq.js";import{f as y,c as a,t as h,e as L,g as r,a as x,p as ge,b as ue,j as l,m as d,s,r as t,D as k,C as me}from"./template.BZWBxZBu.js";import{s as n}from"./render.DvhAf7JS.js";import{i as z}from"./if.fQTVglCE.js";import{r as Q}from"./attributes.Bx7jKKNJ.js";import{a as V}from"./input.CG_-woNV.js";import{c as fe,e as _e,i as qe}from"./storage.mmsOLJq4.js";/* empty css                          */import"./config.BPkNxJtt.js";var be=y("<br/> ",1),he=y('<div class="result-message success svelte-1e0g6q9"> <!> <br/>Page will reload in 2 seconds...</div>'),xe=y('<div class="result-message error svelte-1e0g6q9"> </div>'),ke=y('<div class="export-import svelte-1e0g6q9"><h3 class="section-title svelte-1e0g6q9">Data Backup & Restore</h3> <div class="stats-card svelte-1e0g6q9"><h4 class="svelte-1e0g6q9">Current Data</h4> <div class="stat-grid svelte-1e0g6q9"><div class="stat-item svelte-1e0g6q9"><span class="stat-label svelte-1e0g6q9">Entries</span> <span class="stat-value svelte-1e0g6q9"> </span></div> <div class="stat-item svelte-1e0g6q9"><span class="stat-label svelte-1e0g6q9">Notebooks</span> <span class="stat-value svelte-1e0g6q9"> </span></div> <div class="stat-item svelte-1e0g6q9"><span class="stat-label svelte-1e0g6q9">Storage</span> <span class="stat-value svelte-1e0g6q9"> </span></div></div></div> <div class="action-card svelte-1e0g6q9"><div class="card-header svelte-1e0g6q9"><h4 class="svelte-1e0g6q9">üì• Export Data</h4> <p class="card-description svelte-1e0g6q9">Download all your data as a JSON backup file</p></div> <button class="btn btn-primary svelte-1e0g6q9"> </button></div> <div class="action-card svelte-1e0g6q9"><div class="card-header svelte-1e0g6q9"><h4 class="svelte-1e0g6q9">üì§ Import Data</h4> <p class="card-description svelte-1e0g6q9">Restore from a previous backup file</p></div> <div class="import-options svelte-1e0g6q9"><label class="radio-label svelte-1e0g6q9"><input type="radio" class="svelte-1e0g6q9"/> <span>Merge - Keep existing data and add imported items</span></label> <label class="radio-label svelte-1e0g6q9"><input type="radio" class="svelte-1e0g6q9"/> <span>Replace - Delete all data and import (‚ö†Ô∏è irreversible)</span></label></div> <label class="file-input-label svelte-1e0g6q9"><input type="file" accept=".json" class="file-input svelte-1e0g6q9"/> <span class="btn btn-secondary svelte-1e0g6q9"> </span></label></div> <!> <!> <div class="warning-note svelte-1e0g6q9"><strong class="svelte-1e0g6q9">üí° Backup Recommendations:</strong> <ul class="svelte-1e0g6q9"><li class="svelte-1e0g6q9">Export your data monthly to prevent loss</li> <li class="svelte-1e0g6q9">Store backups in cloud storage (Google Drive, Dropbox)</li> <li class="svelte-1e0g6q9">Before importing, export current data first</li></ul></div></div>');function Ne(W,X){ue(X,!1);const C=[];let m=d({totalEntries:0,totalNotebooks:0,domains:{},estimatedSize:0}),g=d(!1),f=d(!1),u=d("merge"),c=d(null),p=d("");de(()=>{F()});function F(){l(m,fe())}async function Y(){try{l(g,!0),l(p,""),_e(),l(g,!1)}catch(e){l(p,`Export failed: ${e instanceof Error?e.message:"Unknown error"}`),l(g,!1)}}async function Z(e){const o=e.target,v=o.files?.[0];if(v)try{l(f,!0),l(p,""),l(c,null);const i=await qe(v,r(u));l(c,i),i.success&&(F(),setTimeout(()=>window.location.reload(),2e3))}catch(i){l(p,`Import failed: ${i instanceof Error?i.message:"Unknown error"}`)}finally{l(f,!1),o.value=""}}function ee(e){if(e===0)return"0 Bytes";const o=1024,v=["Bytes","KB","MB"],i=Math.floor(Math.log(e)/Math.log(o));return Math.round(e/Math.pow(o,i)*100)/100+" "+v[i]}pe();var E=ke(),w=s(a(E),2),j=s(a(w),2),D=a(j),K=s(a(D),2),ae=a(K,!0);t(K),t(D);var B=s(D,2),U=s(a(B),2),te=a(U,!0);t(U),t(B);var G=s(B,2),J=s(a(G),2),se=a(J,!0);t(J),t(G),t(j),t(w);var M=s(w,2),_=s(a(M),2),re=a(_,!0);t(_),t(M);var I=s(M,2),S=s(a(I),2),R=a(S),q=a(R);Q(q),q.value=q.__value="merge",k(2),t(R);var O=s(R,2),b=a(O);Q(b),b.value=b.__value="replace",k(2),t(O),t(S);var P=s(S,2),$=a(P),T=s($,2),le=a(T,!0);t(T),t(P),t(I);var A=s(I,2);{var oe=e=>{var o=he(),v=a(o),i=s(v);{var ne=N=>{var H=be(),ce=s(me(H));h(()=>n(ce,`${r(c).errors??""} errors occurred.`)),x(N,H)};z(i,N=>{r(c).errors>0&&N(ne)})}k(3),t(o),h(()=>n(v,`‚úì Import successful! Imported ${r(c).imported??""} items. `)),x(e,o)};z(A,e=>{r(c)&&e(oe)})}var ie=s(A,2);{var ve=e=>{var o=xe(),v=a(o);t(o),h(()=>n(v,`‚úó ${r(p)??""}`)),x(e,o)};z(ie,e=>{r(p)&&e(ve)})}k(2),t(E),h(e=>{n(ae,r(m).totalEntries),n(te,r(m).totalNotebooks),n(se,e),_.disabled=r(g),n(re,r(g)?"Exporting...":"Download Backup"),$.disabled=r(f),n(le,r(f)?"Importing...":"Choose Backup File")},[()=>ee(r(m).estimatedSize*2)]),L("click",_,Y),V(C,[],q,()=>r(u),e=>l(u,e)),V(C,[],b,()=>r(u),e=>l(u,e)),L("change",$,Z),x(W,E),ge()}export{Ne as default};
